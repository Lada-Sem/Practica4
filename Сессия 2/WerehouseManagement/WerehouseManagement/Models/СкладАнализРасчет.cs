using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
//using LibWarehouse;

namespace WerehouseManagement.Models
{
    public class СкладАнализРасчет
    {
       /* private Складской_учетEntities db = new Складской_учетEntities();
        private LibWarehouse.СкладскойАнализатор _анализатор;

        public СкладАнализРасчет()
        {
            _анализатор = new LibWarehouse.СкладскойАнализатор();
        }

        public int ПодсчитатьОбщееКоличество()
        {
            var остатки = db.Остатки_На_Складе.ToList();
            var остаткиПреобразованные = ПреобразоватьОстатки(остатки);
            return _анализатор.ПодсчитатьОбщееКоличество(остаткиПреобразованные);
        }

        public decimal ПодсчитатьОбщуюСумму()
        {
            var остатки = db.Остатки_На_Складе.ToList();
            var товары = db.Товары.ToList();
            var остаткиПреобразованные = ПреобразоватьОстатки(остатки);
            var товарыПреобразованные = ПреобразоватьТовары(товары);
            return _анализатор.ПодсчитатьОбщуюСумму(остаткиПреобразованные, товарыПреобразованные);
        }

        public Dictionary<string, int> ПодсчитатьКатегории()
        {
            var остатки = db.Остатки_На_Складе.ToList();
            var товары = db.Товары.ToList();
            var остаткиПреобразованные = ПреобразоватьОстатки(остатки);
            var товарыПреобразованные = ПреобразоватьТовары(товары);
            return _анализатор.ПодсчитатьКатегории(остаткиПреобразованные, товарыПреобразованные);
        }

        private List<LibWarehouse.Остатки_На_Складе> ПреобразоватьОстатки(List<Остатки_На_Складе> остатки)
        {
            return остатки.Select(o => new LibWarehouse.Остатки_На_Складе
            {
                ID_Остатка = o.ID_Остатка,
                ID_Товара = o.ID_Товара,
                ID_Склада = o.ID_Склада,
                Текущее_Количество = o.Текущее_Количество
            }).ToList();
        }

        private List<LibWarehouse.Товар> ПреобразоватьТовары(List<Товары> товары)
        {
            return товары.Select(t => new LibWarehouse.Товар
            {
                ID_Товара = t.ID_Товара,
                Название = t.Название,
                Артикул = t.Артикул,
                Штрихкод = t.Штрихкод,
                Категория = t.Категория,
                Единица_измерения = t.Единица_измерения,
                Цена_за_единицу = t.Цена_за_единицу,
                Серийный_номер = t.Серийный_номер,
                Минимальный_остаток = t.Минимальный_остаток
            }).ToList();
        }*/
    }
}